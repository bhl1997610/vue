webpackJsonp([1],{"+skl":function(t,e){},"1d6d":function(t,e){},NHnr:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("7+uW"),r={data:function(){return{parindex:"",theme2:"dark",menu:[{icon:"",url:"",name:"用户菜单",type:"system",res:[],ops:[],children:[{icon:"",url:"/App",name:"查看数据",res:[],ops:[],children:[]},{icon:"",url:"/menu",name:"个人资料",res:[],ops:{},children:[]}]}]}},methods:{select:function(t){this.$router.push(this.menu[this.parindex].children[t].url)},opchange:function(t){this.parindex=t}},created:function(){var t=this,e="http://192.168.146.159:3000/userinfo?"+document.cookie;this.$http.get(e).then(function(e){t.menu=e.data.menus}).catch(function(t){})}},i={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("router-view"),t._v(" "),a("div",{staticClass:"menu"},[a("Menu",{attrs:{theme:t.theme2,width:"auto",mode:"vertical",accordion:!0},on:{"on-select":t.select,"on-open-change":t.opchange}},t._l(t.menu,function(e,n){return a("Submenu",{key:n,attrs:{name:n}},[a("template",{slot:"title"},[t._v(t._s(e.name))]),t._v(" "),t._l(e.children,function(e,n){return a("Menu-item",{key:n,attrs:{name:n,key:"chil.id"}},[t._v(t._s(e.name))])})],2)}),1)],1)],1)},staticRenderFns:[]};var l=a("VU/8")(r,i,!1,function(t){a("z0Pd")},null,null).exports,o=a("/ocq"),s=a("mw3O"),d=a.n(s),c=(a("Kb+Q"),a("Ya8g"),a("6S2P"),{name:"App",data:function(){return{proname:"",showHeader:!1,datevalue:"",buttonSize:"large",projectList:[],channelList:[],modelname:"",modelqudao:"",select:"Include",exceljson:[],pagenum:1,columns:[{title:"渠道号",key:"渠道号",align:"center"},{title:"渠道名",key:"渠道名",align:"center"},{title:"素材",key:"素材",render:function(t,e){return t("img",{style:{width:"100%",height:"100%"},attrs:{src:e.row.素材,id:e.index},on:{mouseover:function(){var t=document.getElementById(e.index);t.style.width="200px",t.style.height="100px",t.style.position="absolute",t.style.left="12%",t.style.top=60*e.index+"px",t.style.zIndex=10},mouseout:function(){var t=document.getElementById(e.index);t.style.position="",t.style.width="100%",t.style.height="100%"}}})}},{title:"消耗",key:"消耗",align:"center"},{title:"曝光",key:"曝光",align:"center"},{title:"点击",key:"点击",align:"center"},{title:"点击率",key:"点击率",align:"center"},{title:"新增（授权前）",key:"新增（授权前）",width:150,height:400,align:"center",render:function(t,e){return t("div",[t("span",{style:{}},e.row["新增（授权前）"]),t("span",{style:{color:"gray"}},e.row.newsb),t("p",{style:{color:"gray"}},e.row.xzdjsb)])}},{title:"新增（授权后）",key:"新增（授权后）",align:"center",sortable:!0,width:150,render:function(t,e){return t("div",[t("span",{style:{}},e.row["新增（授权后）"]),t("span",{style:{color:"gray"}},e.row.newzc),t("p",{style:{color:"gray"}},e.row.xzdjzc)])}},{title:"授权转化",key:"授权转化",align:"center"},{title:"开局账号数",key:"开局账号数",align:"center"},{title:"开局率",key:"开局率",align:"center"},{title:"人均盘数",key:"人均盘数",align:"center"},{title:"日期",key:"日期",align:"center"}],data:[],sum:[{key:"Channelnumber",align:"center"},{key:"Channelname",align:"center"},{key:"source",align:"center"},{key:"consume",align:"center",render:function(t,e){return t("div",[t("p",{style:{}},e.row.consume)])}},{key:"exposure",align:"center",render:function(t,e){return t("div",[t("p",{style:{}},e.row.exposure)])}},{key:"tap",align:"center",render:function(t,e){return t("div",[t("p",{style:{}},e.row.tap)])}},{key:"clickrate",align:"center",render:function(t,e){return t("div",[t("p",{style:{}},e.row.argclickrate)])}},{key:"before",width:150,align:"center",render:function(t,e){return t("div",[t("p",{style:{}},e.row.before)])}},{key:"after",width:150,align:"center",render:function(t,e){return t("div",[t("p",{style:{}},e.row.after)])}},{key:"Dofauthority",align:"center",render:function(t,e){return t("div",[t("p",{style:{}},e.row.argDofauthority)])}},{key:"OpeningNumbe",align:"center",render:function(t,e){return t("div",[t("p",{style:{}},e.row.OpeningNumbe)])}},{key:"Openingrate",align:"center",render:function(t,e){return t("div",[t("p",{style:{}},e.row.argOpeningrate)])}},{key:"Perinventory",align:"center",render:function(t,e){return t("div",[t("p",{style:{}},e.row.argPerinventory)])}},{key:"date",align:"center"}],data1:[{Channelnumber:"总结\\平均",Channelname:"MP",source:"",consume:"",exposure:"",tap:"",clickrate:"",before:"",after:"",Dofauthority:"",OpeningNumbe:"",Openingrate:"",Perinventory:"",date:"一一"}],returnlist:[]}},methods:{submit:function(){var t=this,e=[];if("Exclude"==this.select){for(var a=0;a<this.channelList.length;a++)e.push(this.channelList[a].label);for(a=0;a<e.length;a++)for(var n=0;n<this.modelqudao.length;n++)e[a]==this.modelqudao[n]&&e.splice(a,1);0==e.length&&(e="")}else e=this.modelqudao.length?this.modelqudao:"";var r=d.a.stringify({projiectName:this.proname,date:this.datevalue,qudao:e});this.$http.get("http://192.168.146.159:3000/find?"+r).then(function(e){var a=0,r=0,i=0,l=0,o=0,s=0,d=0,c=0,u=0,p=0,h=0,f=0,m=0;t.data=[],t.returnlist=[],t.returnlist=e.data;for(var v=0;v<10;v++)t.returnlist[v]&&t.data.push(t.returnlist[v]);for(n=0;n<e.data.length;n++){var g=parseFloat(e.data[n]["点击"].split(",").join("")),y=parseFloat(e.data[n]["消耗"]);if(a+=parseFloat(e.data[n]["消耗"]),r+=parseFloat(e.data[n]["曝光"].split(",").join("")),i+=parseFloat(e.data[n]["点击"].split(",").join("")),l+=parseFloat(e.data[n]["点击率"].split("%")[0]),e.data[n]["新增（授权前）"]&&"一一"!=e.data[n]["新增（授权前）"]){h++,s+=parseFloat(e.data[n]["新增（授权前）"]);var x=parseFloat(e.data[n]["新增（授权前）"].split(",").join("")),F=(x/g).toFixed(2)+"%",w="￥("+(y/x).toFixed(2)+")";e.data[n].newsb="("+F+")",e.data[n].xzdjsb=w}else e.data[n].newsb="",e.data[n].xzdjsb="";if(e.data[n]["新增（授权后）"]&&"一一"!=e.data[n]["新增（授权后）"]){o+=parseFloat(e.data[n]["新增（授权后）"]);var b=parseFloat(e.data[n]["新增（授权后）"].split(",").join("")),k="￥("+(y/b).toFixed(2)+")",z=(b/g).toFixed(2)+"%";e.data[n].newzc="("+z+")",e.data[n].xzdjzc=k}else e.data[n].newzc="",e.data[n].xzdjzc="";e.data[n]["授权转化"]&&"一一"!=e.data[n]["授权转化"]&&(d+=parseFloat(e.data[n]["授权转化"].split("%")[0])),e.data[n]["开局账号数"]&&"一一"!=e.data[n]["开局账号数"]&&""!=e.data[n]["开局账号数"]&&(f++,c+=parseFloat(e.data[n]["开局账号数"])),e.data[n]["人均盘数"]&&"一一"!=e.data[n]["人均盘数"]&&(m++,p+=parseFloat(e.data[n]["人均盘数"])),e.data[n]["开局率"]&&"一一"!=e.data[n]["开局率"]&&(u+=parseFloat(e.data[n]["开局率"].split("%")[0]))}t.data1[0].consume=a.toFixed(2),t.data1[0].exposure=r.toFixed(2),t.data1[0].tap=i.toFixed(2),t.data1[0].argclickrate=(l/e.data.length).toFixed(2)+"%",t.data1[0].after=o.toFixed(2),t.data1[0].before=s.toFixed(2),t.data1[0].argDofauthority=(d/h).toFixed(2)+"%",t.data1[0].OpeningNumbe=c.toFixed(2),t.data1[0].argOpeningrate=0==f?"0.00%":(u/f).toFixed(2)+"%",t.data1[0].argPerinventory=(p/m).toFixed(2),t.pagenum=Math.ceil(t.returnlist.length)}).catch(function(t){console.log(t)})},changeDate:function(t){this.datevalue=t},changePage:function(t){this.data=[];for(var e=10*(t-1);e<10*t;e++)if(this.returnlist[e]){var a=parseFloat(this.returnlist[e]["点击"].split(",").join("")),n=parseFloat(this.returnlist[e]["消耗"]);if(this.returnlist[e]["新增（授权前）"]&&"一一"!=this.returnlist[e]["新增（授权前）"]){var r=parseFloat(this.returnlist[e]["新增（授权前）"].split(",").join("")),i=(r/a).toFixed(2)+"%",l="￥("+(n/r).toFixed(2)+")";this.returnlist[e].newsb="("+i+")",this.returnlist[e].xzdjsb=l}else this.returnlist[e].newsb="",this.returnlist[e].xzdjsb="";if(this.returnlist[e]["新增（授权后）"]&&"一一"!=this.returnlist[e]["新增（授权后）"]){var o=parseFloat(this.returnlist[e]["新增（授权后）"].split(",").join("")),s="￥("+(n/o).toFixed(2)+")",d=(o/a).toFixed(2)+"%";this.returnlist[e].newzc="("+d+")",this.returnlist[e].xzdjzc=s}else this.returnlist[e].newzc="",this.returnlist[e].xzdjzc="";this.data.push(this.returnlist[e])}},download:function(){for(var t="项目名,渠道号,渠道名,消耗,曝光,点击,点击率,新增（授权前）,新增（授权后）,授权转化,开局账号数,开局率,人均盘数,日期\n",e=0;e<this.exceljson.length;e++){for(var a in this.exceljson[e])"素材"!=a&&"newsb"!=a&&"xzdjsb"!=a&&"newzc"!=a&&"xzdjzc"!=a&&("曝光"!=a&&"点击"!=a&&"消耗"!=a||(this.exceljson[e][a]=this.exceljson[e][a].split(",").join("")),t+=this.exceljson[e][a]+"\t,");t+="\n"}var n="data:text/csv;charset=utf-8,\ufeff"+encodeURIComponent(t),r=document.createElement("a");r.href=n,r.download="数据表.csv",document.body.appendChild(r),r.click(),document.body.removeChild(r)},init:function(){var t=this,e="http://192.168.146.159:3000/init?"+document.cookie;this.$http.get(e).then(function(e){t.exceljson=e.data;var a=[],n=[];t.proname=e.data.pop();for(var r=e.data.length,i=0,l=0,o=0,s=0,d=0,c=0,u=0,p=0,h=0,f=0,m=0,v=0,g=0,y=0;y<r;y++){for(var x in e.data[y])e.data[y][x]||(e.data[y][x]="一一");e.data[y]["新增（授权前）"]&&"一一"!=e.data[y]["新增（授权前）"]&&(u++,d+=parseFloat(e.data[y]["新增（授权前）"])),e.data[y]["新增（授权后）"]&&"一一"!=e.data[y]["新增（授权后）"]&&(c+=parseFloat(e.data[y]["新增（授权后）"])),-1==a.indexOf(e.data[y]["渠道号"])&&a.push(e.data[y]["渠道号"]),-1==n.indexOf(e.data[y]["项目名"])&&n.push(e.data[y]["项目名"]),i+=parseFloat(e.data[y]["消耗"]),l+=parseFloat(e.data[y]["曝光"].split(",").join("")),o+=parseFloat(e.data[y]["点击"]),s+=parseFloat(e.data[y]["点击率"].split("%")[0])}t.data1[0].after=c.toFixed(2),t.data1[0].before=d.toFixed(2),t.data1[0].tap=o.toFixed(2),t.data1[0].exposure=l.toFixed(2),t.data1[0].consume=i.toFixed(2),t.data1[0].clickrate=s.toFixed(2)+"%",t.data1[0].argclickrate=(s/r).toFixed(2)+"%";for(y=0;y<a.length;y++)t.channelList.push({value:a[y],label:a[y]});for(y=0;y<n.length;y++)t.projectList.push({value:n[y],label:n[y]});t.returnlist=e.data;for(y=0;y<10;y++)if(e.data[y]){var F=parseFloat(t.returnlist[y]["点击"].split(",").join("")),w=parseFloat(t.returnlist[y]["消耗"]);if(t.returnlist[y]["新增（授权前）"]&&"一一"!=t.returnlist[y]["新增（授权前）"]){var b=parseFloat(t.returnlist[y]["新增（授权前）"].split(",").join("")),k=(b/F).toFixed(2)+"%",z="￥("+(w/b).toFixed(2)+")";t.returnlist[y].newsb="("+k+")",t.returnlist[y].xzdjsb=z}else t.returnlist[y].newsb="",t.returnlist[y].xzdjsb="";if(t.returnlist[y]["新增（授权后）"]&&"一一"!=t.returnlist[y]["新增（授权后）"]){var _=parseFloat(t.returnlist[y]["新增（授权后）"].split(",").join("")),j="￥("+(w/_).toFixed(2)+")",O=(_/F).toFixed(2)+"%";t.returnlist[y].newzc="("+O+")",t.returnlist[y].xzdjzc=j}else t.returnlist[y].newzc="",t.returnlist[y].xzdjzc="";t.data.push(e.data[y])}for(x in e.data)e.data[x]["授权转化"]&&"一一"!=e.data[x]["授权转化"]&&(p+=parseFloat(e.data[x]["授权转化"].split("%")[0])),"0"==e.data[x]["开局账号数"]&&(e.data[x]["开局率"]="一一",e.data[x]["开局账号数"]="一一"),e.data[x]["开局账号数"]&&"一一"!=e.data[x]["开局账号数"]&&(v++,h+=parseFloat(e.data[x]["开局账号数"])),e.data[x]["人均盘数"]&&"一一"!=e.data[x]["人均盘数"]&&(g++,m+=parseFloat(e.data[x]["人均盘数"])),e.data[x]["开局率"]&&"一一"!=e.data[x]["开局率"]&&(f+=parseFloat(e.data[x]["开局率"].split("%")[0])),"一一"==e.data[x]["开局账号数"]&&(e.data[x]["开局率"]="一一");t.data1[0].argOpeningrate=(f/v).toFixed(2)+"%",t.data1[0].Dofauthority=p.toFixed(2)+"%",t.data1[0].argDofauthority=(p/u).toFixed(2)+"%",t.data1[0].OpeningNumbe=h.toFixed(2),t.data1[0].Perinventory=m.toFixed(2),t.data1[0].argPerinventory=(m/g).toFixed(2),t.pagenum=Math.ceil(e.data.length)}).catch(function(t){console.log(t)})}},created:function(){this.init()}}),u={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("div",[a("div",{attrs:{id:"select"}},[a("Select",{staticClass:"option",staticStyle:{width:"25%"},attrs:{placeholder:"项目名称",size:"large",filterable:"",clearable:""},model:{value:t.modelname,callback:function(e){t.modelname=e},expression:"modelname"}},t._l(t.projectList,function(e){return a("Option",{key:e.value,attrs:{value:e.value}},[t._v(t._s(e.label))])}),1),t._v(" "),a("DatePicker",{staticClass:"datepicker",attrs:{value:t.datevalue,type:"date",format:"yyyy-MM-dd",clearable:"",editable:"",confirm:"",placeholder:"Select date",size:"large"},on:{"on-change":t.changeDate}}),t._v(" "),a("Select",{staticClass:"channel",staticStyle:{width:"25%"},attrs:{placeholder:"分包渠道",size:"large",filterable:"",clearable:"",multiple:""},model:{value:t.modelqudao,callback:function(e){t.modelqudao=e},expression:"modelqudao"}},[a("RadioGroup",{attrs:{checked:""},model:{value:t.select,callback:function(e){t.select=e},expression:"select"}},[a("Radio",{attrs:{label:"Include",value:"Include"}},[a("span",[t._v("包括")])]),t._v(" "),a("Radio",{attrs:{label:"Exclude",value:"Exclude"}},[a("span",[t._v("排除")])])],1),t._v(" "),t._l(t.channelList,function(e){return a("Option",{key:e.value,attrs:{value:e.value}},[t._v(t._s(e.label))])})],2),t._v(" "),a("Button",{attrs:{type:"success"},nativeOn:{click:function(e){return t.submit(e)}}},[t._v("确定")]),t._v(" "),a("Button",{staticClass:"export",attrs:{size:t.buttonSize,icon:"ios-download-outline",type:"primary"},nativeOn:{click:function(e){return t.download(e)}}},[t._v("EXPORT")])],1),t._v(" "),a("div",{staticClass:"showarea"},[a("Table",{attrs:{border:"",stripe:"",columns:t.columns,data:t.data,size:"large"}}),t._v(" "),a("Table",{attrs:{columns:t.sum,data:t.data1,border:"","show-header":t.showHeader,size:"large"}}),t._v(" "),a("Page",{staticClass:"page",attrs:{total:t.pagenum,"show-elevator":""},on:{"on-change":t.changePage}})],1)])])},staticRenderFns:[]};var p=a("VU/8")(c,u,!1,function(t){a("UOm2")},null,null).exports,h={created:function(){window.location.href="http://test.box-admin.imeete.com/basic/my_info"}},f=a("VU/8")(h,null,!1,null,null,null).exports,m={created:function(){window.location.href="http://192.168.146.159:3000/logout"}},v={render:function(){var t=this.$createElement;return(this._self._c||t)("div")},staticRenderFns:[]};var g=a("VU/8")(m,v,!1,function(t){a("kE0+")},null,null).exports,y={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"root"}},[a("p",{staticStyle:{"font-size":"16px"}},[t._v("先扫MP，再扫魔方")]),t._v(" "),t._l(t.src,function(e,n){return a("div",{key:n,staticStyle:{float:"left","margin-left":"5%","text-align":"center","font-size":"20px"}},[a("img",{staticStyle:{width:"90%",height:"90%"},attrs:{src:e.src}}),t._v(" "),a("p",[t._v(t._s(e.name))])])})],2)},staticRenderFns:[]};var x=a("VU/8")({data:function(){return{src:[],qsrc:"",wsrc:""}},created:function(){var t=this;this.$http.get("http://192.168.146.159:3000/getqrcode").then(function(e){t.src=[];for(var a=0;a<e.data.length;a++)t.src.push({src:"http://192.168.146.159:3000/public/images/"+e.data[a],name:e.data[a].split(".")[0]})}).catch(function(t){})}},y,!1,function(t){a("1d6d")},null,null).exports;n.default.use(o.a);var F=new o.a({mode:"history",routes:[{path:"/App",name:"App",component:p},{path:"/userinfo",name:"hellow",component:f},{path:"/logout",name:"logout",component:g},{path:"/qrcode",name:"qrcode",component:x}]}),w=a("BTaQ"),b=a.n(w),k=(a("+skl"),a("mtWM")),z=a.n(k);n.default.prototype.$http=z.a,n.default.config.productionTip=!1,n.default.use(b.a),new n.default({el:"#app",router:F,components:{App:l},template:"<App/>"})},UOm2:function(t,e){},"kE0+":function(t,e){},z0Pd:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.68ed1febbe0fbf4c64c1.js.map